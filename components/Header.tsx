'use client';

import { useState, useEffect } from 'react';
import Link from 'next/link';

export default function Header() {
  const [darkTheme, setDarkTheme] = useState<boolean | undefined>(undefined);

  const handleToggle = () => {
    setDarkTheme(!darkTheme);
  };

  useEffect(() => {
    if (darkTheme !== undefined) {
      if (darkTheme) {
        document.body.setAttribute('data-theme', 'dark');
        document.body.className = 'dark';
        window.localStorage.setItem('theme', 'dark');
      } else {
        document.body.removeAttribute('data-theme');
        document.body.className = 'light';
        window.localStorage.setItem('theme', 'light');
      }
    }
  }, [darkTheme]);

  useEffect(() => {
    const root = window.document.body;
    const initialColorValue = root.style.getPropertyValue('--initial-color-mode');

    setDarkTheme(initialColorValue === 'dark');
  }, []);

  return (
    <nav className="fixed top-0 left-0 z-10 w-full p-4 mx-auto backdrop-blur-md">
      <div className="flex items-center justify-between max-w-3xl mx-auto lg:max-w-6xl">
        <div>
          <Link href="/" className="italic no-underline blog_name">
            Devlog
          </Link>
        </div>
        <div className="flex items-center">
          <Link href="/blog" className="pr-5 no-underline">
            blog
          </Link>
          <Link href="/about" className="pr-5 no-underline">
            about
          </Link>

          {darkTheme !== undefined && (
            <button onClick={handleToggle} className="mr-5" style={{ background: 'none' }}>
              {darkTheme ? (
                <svg
                  width="30"
                  height="30"
                  viewBox="0 0 30 30"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_1005_1636)">
                    <path
                      d="M14.9999 23.8511C19.8005 23.8511 23.6922 19.9323 23.6922 15.0982C23.6922 10.264 19.8005 6.34521 14.9999 6.34521C10.1993 6.34521 6.30762 10.264 6.30762 15.0982C6.30762 19.9323 10.1993 23.8511 14.9999 23.8511Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M14.9999 0.882324L13.1128 4.1735H16.8871L14.9999 0.882324Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M29.1176 15.097L25.8496 16.9974V13.1978L29.1176 15.097Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M0.882324 15.097L4.15034 16.9974V13.1978L0.882324 15.097Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M5.01733 5.0459L5.99344 8.71649L8.66255 6.02972L5.01733 5.0459Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M24.9826 5.0459L21.3374 6.02972L24.0065 8.71649L24.9826 5.0459Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M14.9999 29.1178L13.1128 25.8267H16.8871L14.9999 29.1178Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M5.01733 24.9543L5.99344 21.2837L8.66255 23.9705L5.01733 24.9543Z"
                      fill="#FFEB3C"
                    />
                    <path
                      d="M24.9826 24.9543L21.3374 23.9705L24.0065 21.2837L24.9826 24.9543Z"
                      fill="#FFEB3C"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_1005_1636">
                      <rect width="30" height="30" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              ) : (
                <svg
                  width="30"
                  height="30"
                  viewBox="0 0 30 30"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M17.375 27.6406C17.2188 27.6406 17.0625 27.6406 16.9063 27.625C11.5469 27.3906 7.28129 22.9844 7.20317 17.625C7.15629 14.875 8.20317 12.2812 10.125 10.3281C12.0469 8.375 14.625 7.29688 17.375 7.29688C17.6094 7.29688 17.8438 7.3125 18.0938 7.32813C18.2969 7.34375 18.4688 7.48438 18.5157 7.6875C18.5625 7.89062 18.4844 8.09375 18.3125 8.20312C16.2032 9.53125 14.9063 12 14.9063 14.6563C14.9063 18.75 17.9375 22.0937 21.6563 22.0937C23.4375 22.0937 25.125 21.3281 26.3907 19.9531C26.4688 19.8594 26.5938 19.8125 26.7032 19.8125C26.8438 19.8125 26.9688 19.875 27.0469 19.9844C27.125 20.0937 27.1563 20.2344 27.1094 20.3594C25.8438 24.6563 21.8438 27.6406 17.375 27.6406Z"
                    fill="#FFCF48"
                  />
                  <path
                    d="M17.3749 7.65625C17.6093 7.65625 17.8437 7.67188 18.0624 7.6875C18.1874 7.70313 18.2187 7.84375 18.1249 7.90625C15.9999 9.25 14.5624 11.7656 14.5624 14.6563C14.5624 18.9531 17.7343 22.4375 21.6562 22.4375C23.6093 22.4375 25.3749 21.5781 26.6562 20.1875C26.6718 20.1719 26.6874 20.1562 26.7187 20.1562C26.7656 20.1562 26.8124 20.2031 26.7968 20.2656C25.5937 24.3281 21.8281 27.2813 17.3906 27.2813C17.2343 27.2813 17.0937 27.2813 16.9374 27.2656C11.7812 27.0312 7.65619 22.7656 7.57806 17.6094C7.46869 12.125 11.8906 7.65625 17.3749 7.65625ZM17.3749 6.95312C14.5312 6.95312 11.8749 8.0625 9.87494 10.0937C7.87494 12.1094 6.81244 14.7969 6.84369 17.6406C6.89056 20.3125 7.93744 22.8594 9.81244 24.7969C11.6874 26.7344 14.2031 27.875 16.8749 27.9844C17.0312 27.9844 17.2031 28 17.3593 28C19.6718 28 21.8749 27.2656 23.7031 25.875C25.4843 24.5313 26.8124 22.6094 27.4374 20.4844C27.5156 20.25 27.4687 19.9844 27.3124 19.7969C27.1718 19.5937 26.9218 19.4844 26.6874 19.4844C26.4687 19.4844 26.2656 19.5781 26.1093 19.7344C24.9062 21.0469 23.3124 21.7656 21.6249 21.7656C18.0937 21.7656 15.2343 18.5938 15.2343 14.6875C15.2343 12.1406 16.4687 9.78125 18.4687 8.53125C18.7656 8.34375 18.9218 7.98437 18.8281 7.625C18.7343 7.28125 18.4374 7.03125 18.0937 7C17.8593 6.96875 17.6093 6.95312 17.3749 6.95312Z"
                    fill="black"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M9.10942 17.625C9.03129 12.4219 13.0157 8.125 18.0938 7.70312C18.0782 7.70312 18.0625 7.6875 18.0469 7.6875C17.8125 7.67188 17.5938 7.65625 17.3594 7.65625C11.8907 7.65625 7.46879 12.125 7.54692 17.625C7.62504 22.7813 11.75 27.0469 16.9063 27.2813C17.3282 27.2969 17.75 27.2969 18.1563 27.2656C13.1563 26.875 9.18754 22.6719 9.10942 17.625Z"
                    fill="#FFBC33"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M9.10938 7.5625C8.96875 7.5625 8.75 7.5 8.75 7.09375C8.75 5.9375 7.8125 5 6.65625 5C6.59375 5 6.5625 5 6.53125 5C6.29688 4.96875 6.1875 4.79688 6.1875 4.64063C6.1875 4.53125 6.23437 4.28125 6.65625 4.28125C7.8125 4.28125 8.75 3.34375 8.75 2.1875C8.75 1.76562 9 1.71875 9.10938 1.71875C9.21875 1.71875 9.46875 1.76562 9.46875 2.1875C9.46875 3.34375 10.4063 4.28125 11.5625 4.28125C11.9844 4.28125 12.0313 4.53125 12.0313 4.64063C12.0313 4.79688 11.9219 4.96875 11.6875 5C11.6563 5 11.6094 5 11.5625 5C10.4063 5 9.46875 5.9375 9.46875 7.09375C9.46875 7.15625 9.46875 7.20313 9.46875 7.21875C9.4375 7.45313 9.26563 7.5625 9.10938 7.5625Z"
                    fill="#FFBC33"
                  />
                  <path
                    d="M9.10938 2.04688C9.10938 2.04688 9.125 2.09375 9.125 2.17187C9.125 3.53125 10.2188 4.625 11.5781 4.625C11.7344 4.625 11.75 4.65625 11.5781 4.65625C10.2188 4.65625 9.125 5.75 9.125 7.10938C9.125 7.1875 9.125 7.23437 9.10938 7.23437C9.10938 7.23437 9.09375 7.1875 9.09375 7.10938C9.09375 5.75 8 4.65625 6.64062 4.65625C6.48437 4.65625 6.48437 4.625 6.64062 4.625C8 4.625 9.09375 3.53125 9.09375 2.17187C9.09375 2.09375 9.09375 2.04688 9.10938 2.04688ZM9.10938 1.34375C9.07813 1.34375 8.39063 1.35937 8.39063 2.17187C8.39063 3.14062 7.60938 3.92188 6.64062 3.92188C5.82812 3.92188 5.8125 4.60938 5.8125 4.64063C5.8125 4.95313 6.03125 5.29688 6.46875 5.34375C6.51563 5.34375 6.57812 5.34375 6.64062 5.34375C7.60938 5.34375 8.39063 6.125 8.39063 7.09375C8.39063 7.90625 9.07813 7.92187 9.10938 7.92187C9.14063 7.92187 9.82813 7.90625 9.82813 7.09375C9.82813 6.125 10.6094 5.34375 11.5781 5.34375C12.3906 5.34375 12.4063 4.65625 12.4063 4.625C12.4063 4.59375 12.3906 3.90625 11.5781 3.90625C10.6094 3.90625 9.82813 3.125 9.82813 2.15625C9.82813 1.35937 9.14063 1.34375 9.10938 1.34375Z"
                    fill="black"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M5.17187 12.0156C5.10937 12.0156 4.8125 12 4.8125 11.5781C4.8125 10.8437 4.21875 10.25 3.48437 10.25C3.4375 10.25 3.40625 10.25 3.39063 10.25C3.15625 10.2187 3.0625 10.0469 3.0625 9.89062C3.0625 9.82812 3.07812 9.53125 3.5 9.53125C4.23437 9.53125 4.82812 8.9375 4.82812 8.20312C4.82812 7.79687 5.125 7.76562 5.1875 7.76562C5.25 7.76562 5.54687 7.78125 5.54687 8.20312C5.54687 8.9375 6.14062 9.53125 6.875 9.53125C7.29687 9.53125 7.3125 9.82812 7.3125 9.89062C7.3125 9.95312 7.29687 10.25 6.875 10.25C6.14062 10.25 5.54687 10.8437 5.54687 11.5781C5.54687 11.625 5.54687 11.6562 5.54687 11.6719C5.5 11.9062 5.32812 12.0156 5.17187 12.0156Z"
                    fill="#FFBC33"
                  />
                  <path
                    d="M5.17187 8.10938C5.17187 8.10938 5.1875 8.14063 5.1875 8.1875C5.1875 9.10938 5.9375 9.875 6.875 9.875C6.98437 9.875 6.98437 9.89062 6.875 9.89062C5.95312 9.89062 5.1875 10.6406 5.1875 11.5781C5.1875 11.6406 5.1875 11.6562 5.17187 11.6562C5.17187 11.6562 5.15625 11.625 5.15625 11.5781C5.15625 10.6562 4.40625 9.89062 3.46875 9.89062C3.35938 9.89062 3.35938 9.875 3.46875 9.875C4.39063 9.875 5.15625 9.125 5.15625 8.1875C5.17187 8.14063 5.17187 8.10938 5.17187 8.10938ZM5.17187 7.40625C4.92187 7.40625 4.45312 7.57813 4.45312 8.1875C4.45312 8.73438 4.01562 9.17188 3.46875 9.17188C2.84375 9.17188 2.6875 9.64062 2.6875 9.89062C2.6875 10.1406 2.85937 10.6094 3.46875 10.6094C4.01562 10.6094 4.45312 11.0469 4.45312 11.5937C4.45312 12.2187 4.92187 12.375 5.17187 12.375C5.42187 12.375 5.89062 12.2031 5.89062 11.5937C5.89062 11.0469 6.32812 10.6094 6.875 10.6094C7.5 10.6094 7.65625 10.1406 7.65625 9.89062C7.65625 9.57812 7.4375 9.23437 7 9.1875C6.95312 9.1875 6.90625 9.1875 6.85938 9.1875C6.3125 9.1875 5.875 8.75 5.875 8.20312C5.89062 7.57812 5.42187 7.40625 5.17187 7.40625Z"
                    fill="black"
                  />
                </svg>
              )}
            </button>
          )}
        </div>
      </div>
    </nav>
  );
}
